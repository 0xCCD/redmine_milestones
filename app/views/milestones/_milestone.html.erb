<div id="milestone_#{milestone.id}" class="milestone">
  <% if milestone.parent_milestone.present? %>
    <%=  image_tag('arrow_up.png', :size=>'16x16', :plugin=>'redmine_milestones', :style=>'vertical-align: top') %>
  <% end %>
  <%= image_tag('milestone.png', :plugin=>'redmine_milestones', :style=>'vertical-align: top') %>
  <div style="display: inline-block">
    <strong>
      <%= link_to "#{milestone.name} (#{milestone.issues_count} #{t(:issues)}, #{milestone.closed_issues_count} #{t(:done)} #{milestone.open_issues_count} #{t(:left)})", milestone_path(milestone) %>
    </strong>
    <br>
    <%=  milestone.description %>
  </div>
  <% unless milestone.issues.empty? %>
      <table class="list related-issues">
        <caption><%= l(:label_related_issues) %></caption>
        <% milestone.issues.each do |issue| -%>
            <tr class="hascontextmenu">
              <td class="checkbox"><%= check_box_tag 'ids[]', issue.id, false, :id => nil %></td>
              <td><%= link_to_issue(issue, :project => (@project != issue.project)) %></td>
            </tr>
        <% end -%>
      </table>
  <% end %>
  <% unless milestone.children.empty? %>
    <% if params[:completed_milestones] %>
      <%= render :partial => "milestones/milestone", :collection => milestone.children %>
    <% else %>
      <%= render :partial => "milestones/milestone", :collection => milestone.children.opened %>
    <% end %>
  <% end %>
</div>
